(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function l(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(t){if(t.ep)return;t.ep=!0;const e=l(t);fetch(t.href,e)}})();function a(i){let n=[i[1]-i[0],i[2]-i[1],i[3]-i[2]],l=[n[1]-n[0],n[2]-n[1]],r=[l[1]-l[0]],t=!1,e=!1;if(l[0]===l[1])t=!0,e=!1;else if(r[0]||r[0]===0)t=!1,e=!0;else return console.log("unknown sequence (exponent may > 3)"),{exp:0,a:0,b:0,c:0,d:0};let s=0,o=0,c=0,u=0;return t?(s=l[0]/2,o=n[0]-3*s,c=i[0]-s-o):e&&(s=r[0]/6,o=(l[0]-12*s)/2,c=n[0]-7*s-3*o,u=i[0]-s-o-c),{exp:t?2:e?3:0,a:s,b:o,c,d:u}}function d(i,n){if(!n)return;i=`[${i}]`;let l=JSON.parse(i);if(!l[0]&&l[0]!==0){alert("参数错误");return}let r=a(l);r.exp||alert("错误，表达式次数可能超过3");function t(e,s){return e===0?"":`${e>0?"+":""}${e}${s}`}if(r.exp===2){let e=`${t(r.a,"n<sup>2</sup>")}${t(r.b,"n")}${t(r.c,"")}`;e.startsWith("+")&&(e=e.slice(1)),n.innerHTML=`a<sub>n</sub> = ${e}`}else if(r.exp===3){let e=`${t(r.a,"n<sup>3</sup>")}${t(r.b,"n<sup>2</sup>")}${t(r.c,"n")}${t(r.d,"")}`;console.log(e,r.b),e.startsWith("+")&&(e=e.slice(1)),n.innerHTML=`a<sub>n</sub> = ${e}`}}var f;(f=document.getElementById("calc-button"))==null||f.addEventListener("click",()=>{d(document.getElementById("sequence-data").value,document.getElementById("nth-term-data"))});
