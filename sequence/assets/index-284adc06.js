(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const n of e.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function l(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(t){if(t.ep)return;t.ep=!0;const e=l(t);fetch(t.href,e)}})();function a(i){let s=[i[1]-i[0],i[2]-i[1],i[3]-i[2]],l=[s[1]-s[0],s[2]-s[1]],r=[l[1]-l[0]],t=!1,e=!1;if(l[0]===l[1])t=!0,e=!1;else if(r[0]||r[0]===0)t=!1,e=!0;else return console.log("unknown sequence (exponent may > 3)"),{exp:0,a:0,b:0,c:0,d:0};let n=0,o=0,c=0,u=0;return t?(n=l[0]/2,o=s[0]-3*n,c=i[0]-n-o):e&&(n=r[0]/6,o=(l[0]-12*n)/2,c=s[0]-7*n-3*o,u=i[0]-n-o-c),{exp:t?2:e?3:0,a:n,b:o,c,d:u}}function d(i,s){if(!s)return;i=`[${i}]`;let l=JSON.parse(i);if(!l[0]&&l[0]!==0){alert("参数错误");return}let r=a(l);r.exp||alert("错误，表达式次数可能超过3");function t(e,n){return e===0?"":e===1?n||`${e>0?"+":""}${e}`:`${e>0?"+":""}${e}${n}`}if(r.exp===2){let e=`${t(r.a,"n<sup>2</sup>")}${t(r.b,"n")}${t(r.c,"")}`;e.startsWith("+")&&(e=e.slice(1)),s.innerHTML=`a<sub>n</sub> = ${e}`}else if(r.exp===3){let e=`${t(r.a,"n<sup>3</sup>")}${t(r.b,"n<sup>2</sup>")}${t(r.c,"n")}${t(r.d,"")}`;e.startsWith("+")&&(e=e.slice(1)),s.innerHTML=`a<sub>n</sub> = ${e}`}}var f;(f=document.getElementById("calc-button"))==null||f.addEventListener("click",()=>{d(document.getElementById("sequence-data").value,document.getElementById("nth-term-data"))});
